import requests
from flask import render_template, Blueprint

previsions_bp = Blueprint('previsions', __name__)

@previsions_bp.route('/previsions.html')
def previsions():
    # Exemple : récupérer la météo sur 3 jours pour Paris
    api_key = "234b98945460ba88c68738ebbe90ef2e"
    city = "Dakar"
    url = f"https://api.openweathermap.org/data/2.5/forecast?q={city}&appid={api_key}&lang=fr&units=metric"
    response = requests.get(url)
    data = response.json()

    # On prépare une liste de prévisions pour le template
    previsions = []
    for item in data["list"][:3]:  # Les 3 prochaines prévisions
        previsions.append({
            "date": item["dt_txt"],
            "type": "Température",
            "valeur": f"{item['main']['temp']} °C"
        })

    return render_template("previsions.html", previsions=previsions)