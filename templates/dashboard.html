{%extends "base.html"%}
{%block content%}
<div class="px-20 flex flex-1 justify-center py-5">
    <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
    <div class="flex flex-wrap justify-between gap-3 p-4"><p class="text-[#0e1a13] tracking-light text-[32px] font-bold leading-tight min-w-72">Tableau de bord</p></div>
    <div class="flex flex-wrap gap-4 p-4">
        <div class="flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#e8f2ec]">
        <p class="text-[#0e1a13] text-base font-medium leading-normal">Superficie totale</p>
        <p class="text-[#078829] tracking-light text-2xl font-bold leading-tight">{{sup_totale}} ha</p>
        </div>
        <div class="flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#e8f2ec]">
        <p class="text-[#0e1a13] text-base font-medium leading-normal">Nombre de parcelles</p>
        <p class="text-[#0e1a13] tracking-light text-2xl font-bold leading-tight">{{nb_parcelles}}</p>
        </div>
        <div class="flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#e8f2ec]">
        <p class="text-[#0e1a13] text-base font-medium leading-normal">Tâches en cours</p>
        <p class="text-[#078829] tracking-light text-2xl font-bold leading-tight">{{tache_en_cours}}</p>
        </div>
    </div>
    <h2 class="text-[#0e1a13] text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3 pt-5">Résumé des parcelles</h2>
    <div class="px-4 py-3 @container">
        <div class="flex overflow-hidden rounded-lg border border-[#d1e6d9] bg-[#f8fbfa]">
        <table class="flex-1">
            <thead>
            <tr class="bg-[#f8fbfa]">
                <th class="table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-120 px-4 py-3 text-left text-[#0e1a13] w-[400px] text-sm font-medium leading-normal">Nom</th>
                <th class="table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-240 px-4 py-3 text-left text-[#0e1a13] w-[400px] text-sm font-medium leading-normal">
                Superficie
                </th>
                <th class="table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-360 px-4 py-3 text-left text-[#0e1a13] w-[400px] text-sm font-medium leading-normal">Culture</th>
                <th class="table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-480 px-4 py-3 text-left text-[#0e1a13] w-[400px] text-sm font-medium leading-normal">
                Date de semis
                </th>
                <th class="table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-600 px-4 py-3 text-left text-[#0e1a13] w-60 text-sm font-medium leading-normal">Statut</th>
            </tr>
            </thead>
            <tbody>
            {% for parcelle in parcelles %}
            <tr class="border-t border-t-[#d1e6d9]">
                <td class="table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-120 h-[72px] px-4 py-2 w-[400px] text-[#0e1a13] text-sm font-normal leading-normal">{{parcelle.nom}}</td>
                <td class="table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-240 h-[72px] px-4 py-2 w-[400px] text-[#51946b] text-sm font-normal leading-normal">{{parcelle.superficie}}ha</td>
                <td class="table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-360 h-[72px] px-4 py-2 w-[400px] text-[#51946b] text-sm font-normal leading-normal">{{parcelle.culture}}</td>
                <td class="table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-480 h-[72px] px-4 py-2 w-[400px] text-[#51946b] text-sm font-normal leading-normal">
                {{parcelle.date_semis.strftime('%Y-%m-%d') if parcelle.date_semis else 'N/A'}}
                </td>
                <td class="table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-600 h-[72px] px-4 py-2 w-60 text-sm font-normal leading-normal">
                <button
                    class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-8 px-4 bg-[#e8f2ec] text-[#0e1a13] text-sm font-medium leading-normal w-full"
                >
                    <span class="truncate">{{parcelle.statut}}</span>
                </button>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
        </div>
        <style>
                    @container(max-width:120px){.table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-120{display: none;}}
        @container(max-width:240px){.table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-240{display: none;}}
        @container(max-width:360px){.table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-360{display: none;}}
        @container(max-width:480px){.table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-480{display: none;}}
        @container(max-width:600px){.table-f47dc83f-0998-4df7-8cea-5ad69b421957-column-600{display: none;}}
        </style>
    </div>
    <h2 class="text-[#0e1a13] text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3 pt-5">Tâches à venir</h2>
    <div class="flex items-center gap-4 bg-[#f8fbfa] px-4 min-h-[72px] py-2">
        <div class="text-[#0e1a13] flex items-center justify-center rounded-lg bg-[#e8f2ec] shrink-0 size-12" data-icon="Plant" data-size="24px" data-weight="regular">
        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
            <path
            d="M247.63,39.89a8,8,0,0,0-7.52-7.52c-51.76-3-93.32,12.74-111.18,42.22-11.8,19.49-11.78,43.16-.16,65.74a71.34,71.34,0,0,0-14.17,27L98.33,151c7.82-16.33,7.52-33.35-1-47.49-13.2-21.79-43.67-33.47-81.5-31.25a8,8,0,0,0-7.52,7.52c-2.23,37.83,9.46,68.3,31.25,81.5A45.82,45.82,0,0,0,63.44,168,54.58,54.58,0,0,0,87,162.33l25,25V216a8,8,0,0,0,16,0V186.51a55.61,55.61,0,0,1,12.27-35,73.91,73.91,0,0,0,33.31,8.4,60.9,60.9,0,0,0,31.83-8.86C234.89,133.21,250.67,91.65,247.63,39.89ZM47.81,147.6C32.47,138.31,23.79,116.32,24,88c28.32-.24,50.31,8.47,59.6,23.81,4.85,8,5.64,17.33,2.46,26.94L61.65,114.34a8,8,0,0,0-11.31,11.31l24.41,24.41C65.14,153.24,55.82,152.45,47.81,147.6Zm149.31-10.22c-13.4,8.11-29.15,8.73-45.15,2l53.69-53.7a8,8,0,0,0-11.31-11.31L140.65,128c-6.76-16-6.15-31.76,2-45.15,13.94-23,47-35.82,89.33-34.83C232.94,90.34,220.14,123.44,197.12,137.38Z"
            ></path>
        </svg>
        </div>
        <div class="flex flex-col justify-center">
        <p class="text-[#0e1a13] text-base font-medium leading-normal line-clamp-1">Fertilisation</p>
        {%for parcelle in parcelles%}
            {% if parcelle.fertilisation%}
                <p class="text-[#51946b] text-sm font-normal leading-normal line-clamp-2">{{parcelle.nom}}</p>
            {%endif%}
        {%endfor%}
        </div>
    </div>
    <div class="flex items-center gap-4 bg-[#f8fbfa] px-4 min-h-[72px] py-2">
        <div class="text-[#0e1a13] flex items-center justify-center rounded-lg bg-[#e8f2ec] shrink-0 size-12" data-icon="Drop" data-size="24px" data-weight="regular">
        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
            <path
            d="M174,47.75a254.19,254.19,0,0,0-41.45-38.3,8,8,0,0,0-9.18,0A254.19,254.19,0,0,0,82,47.75C54.51,79.32,40,112.6,40,144a88,88,0,0,0,176,0C216,112.6,201.49,79.32,174,47.75ZM128,216a72.08,72.08,0,0,1-72-72c0-57.23,55.47-105,72-118,16.53,13,72,60.75,72,118A72.08,72.08,0,0,1,128,216Zm55.89-62.66a57.6,57.6,0,0,1-46.56,46.55A8.75,8.75,0,0,1,136,200a8,8,0,0,1-1.32-15.89c16.57-2.79,30.63-16.85,33.44-33.45a8,8,0,0,1,15.78,2.68Z"
            ></path>
        </svg>
        </div>
        <div class="flex flex-col justify-center">
        <p class="text-[#0e1a13] text-base font-medium leading-normal line-clamp-1">Irrigation</p>
        {%for parcelle in parcelles%}
            {% if parcelle.irrigation%}
                <p class="text-[#51946b] text-sm font-normal leading-normal line-clamp-2">{{parcelle.nom}}</p>
            {%endif%}
        {%endfor%}        </div>
    </div>
    <div class="flex items-center gap-4 bg-[#f8fbfa] px-4 min-h-[72px] py-2">
        <div class="text-[#0e1a13] flex items-center justify-center rounded-lg bg-[#e8f2ec] shrink-0 size-12" data-icon="Bug" data-size="24px" data-weight="regular">
        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
            <path
            d="M144,92a12,12,0,1,1,12,12A12,12,0,0,1,144,92ZM100,80a12,12,0,1,0,12,12A12,12,0,0,0,100,80Zm116,64A87.76,87.76,0,0,1,213,167l22.24,9.72A8,8,0,0,1,232,192a7.89,7.89,0,0,1-3.2-.67L207.38,182a88,88,0,0,1-158.76,0L27.2,191.33A7.89,7.89,0,0,1,24,192a8,8,0,0,1-3.2-15.33L43,167A87.76,87.76,0,0,1,40,144v-8H16a8,8,0,0,1,0-16H40v-8a87.76,87.76,0,0,1,3-23L20.8,79.33a8,8,0,1,1,6.4-14.66L48.62,74a88,88,0,0,1,158.76,0l21.42-9.36a8,8,0,0,1,6.4,14.66L213,89.05a87.76,87.76,0,0,1,3,23v8h24a8,8,0,0,1,0,16H216ZM56,120H200v-8a72,72,0,0,0-144,0Zm64,95.54V136H56v8A72.08,72.08,0,0,0,120,215.54ZM200,144v-8H136v79.54A72.08,72.08,0,0,0,200,144Z"
            ></path>
        </svg>
        </div>
        <div class="flex flex-col justify-center">
        <p class="text-[#0e1a13] text-base font-medium leading-normal line-clamp-1">Contrôle des ravageurs</p>
        {%for parcelle in parcelles%}
            {% if parcelle.controle_ravageurs%}
                <p class="text-[#51946b] text-sm font-normal leading-normal line-clamp-2">{{parcelle.nom}}</p>
            {%endif%}
        {%endfor%}        
    </div>
    </div>
    </div>
</div>
{%endblock%}
      
